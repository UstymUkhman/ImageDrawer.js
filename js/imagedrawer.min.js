/*! 
 * ImageDrawer.js - v1.2.0
 *
 * @link    https://github.com/UstymUkhman/ImageDrawer.js
 * @author  <ustym.ukhman@gmail.com>
 * @license MIT
 */
 "use strict";!function(i){i.fn.extend({drawImage:function(n){var e=0,o=null,a={},r=i(this).find("img"),t=null,s=null,l=null;"function"==typeof n?o=n:"object"==typeof n&&(a=n);var d=null,c={duration:a.duration||{borderPencil:6,pencilShades:4,colorShades:5,fullColors:5},callback:o||a.callback,pencil:a.pencil||null,background:a.background||null},u=function(n){var e=!0;return i.each(n,function(i,n){"src"!==i&&"invertAxis"!==i&&"fromBottom"!==i&&"number"!=typeof n&&(console.warn('The value of "'+i+'" in "pencil" has to be a number.'),e=!1)}),e},p=function(i,n){var e=n.pos.fromBottom?n.width:n.pos.marginLeft,o=n.pos.fromBottom?n.height:n.pos.marginTop,a=n.pos.invertAxis?5.925925:177.77777,r=n.pos.invertAxis?100:10,t=n.width/r,s=n.height/a,d=e+t,c=o+s,r=e,a=o;n.pos.fromBottom&&(r=n.pos.marginLeft,a=n.pos.marginTop,t=-t,s=-s);var u=function(){i.css({transform:"translate3d("+e+"px, "+o+"px, 0px)","-webkit-transform":"translate3d("+e+"px, "+o+"px, 0px)"}),(d>=n.width||r>=d)&&(t=-t),e+=t,d=e+t,(c>=n.height||a>c)&&(s=-s),o+=s,c=o+s,l=requestAnimationFrame(u)};l=requestAnimationFrame(u)};if(i.isArray(c.duration)){var h=0;t={borderPencil:c.duration[0]+"s",pencilShades:c.duration[1]+"s",colorShades:c.duration[2]+"s",fullColors:c.duration[3]+"s"};for(var m=0;4>m;m++)h+=c.duration[m]}if("number"==typeof c.duration){var f=c.duration/4,b=c.duration/10;t={borderPencil:6*b+"s",pencilShades:4*b+"s",colorShades:f+"s",fullColors:f+"s"}}else i.isArray(c.duration)||(t={borderPencil:c.duration.borderPencil+"s",pencilShades:c.duration.pencilShades+"s",colorShades:c.duration.colorShades+"s",fullColors:c.duration.fullColors+"s"});return null!==c.pencil&&u(c.pencil)&&(s=i("<img>").attr({src:c.pencil.src}).css({position:"absolute",width:c.pencil.width+"px",height:c.pencil.height+"px","z-index":1500}),i(this).prepend(s),p(s,{height:r.height()+c.pencil.marginTop,width:r.width()+c.pencil.marginLeft,pos:c.pencil})),c.background&&(d=i("<div>").addClass("imgBackground").css({"background-color":c.background,"animation-duration":t.borderPencil,"-webkit-animation-duration":t.borderPencil,width:i(this).width(),height:i(this).height()}),i(this).prepend(d)),r.addClass("visibleImage borderPencil").css({"animation-duration":t.borderPencil,"-webkit-animation-duration":t.borderPencil}).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){var i,n,o;switch(e++){case 0:i="borderPencil",n="pencilShades",o=t.pencilShades,d&&d.remove();break;case 1:i="pencilShades",n="colorShades",o=t.colorShades;break;case 2:i="colorShades",n="fullColors",o=t.fullColors;break;case 3:return r.css({filter:"brightness(1.05) saturate(1.05)","-webkit-filter":"brightness(1.05) saturate(1.05)"}).removeClass("fullColors").removeClass("visibleImage"),void(null!==l?(cancelAnimationFrame(l),c.pencil.disappear&&s.addClass("pencil").css({top:s.offset().top+"px",left:s.offset().left+"px","animation-duration":c.pencil.disappear+"s","-webkit-animation-duration":c.pencil.disappear+"s"}),setTimeout(function(){s.remove(),null!==c.callback&&c.callback()},1e3*c.pencil.disappear)):null!==c.callback&&c.callback())}r.removeClass(i).addClass(n).css({"animation-duration":o,"-webkit-animation-duration":o})}),this}})}(jQuery);